#!name = 定时任务
#!desc = 每天自动完成相关任务，根据需求进入插件打开相应开关即可。\n首次安装插件需打开对应 APP 或 小程序 获取Cookie。
#!openUrl = 
#!author = FoKit[https://github.com/FoKit], Sliverkiss[https://github.com/Sliverkiss], ClydeTime[https://github.com/ClydeTime], wish[https://github.com/mist-whisper], ZenmoFeiShi[https://github.com/ZenmoFeiShi]
#!tag = 功能增强
#!system = iOS iPadOS
#!system_version = 15
#!loon_version = 3.2.9(837)
#!homepage = https://github.com/mist-whisper/Loon/blob/master/README.md
#!icon = https://raw.githubusercontent.com/mist-whisper/Icon/master/MyIcon/DailyBonus.png
#!date = 2025-05-05 00:50:00

[Argument]
BiliBili_Cookie_APP = switch,"false","true",tag=B站客户端账号捕获,desc=获取客户端Cookie
BiliBili_Cookie_WEB = switch,"false","true",tag=B站网页版账号捕获,desc=获取网页版Cookie
MXBC_Cookie = switch,"false","true",tag=蜜雪冰城账号捕获,desc=获取Cookie
Soul_Cookie = switch,"false","true",tag=Soul账号捕获,desc=获取Cookie
WechatPay_Cookie = switch,"false","true",tag=支付有优惠账号捕获,desc=获取Cookie
BiliBili_DailyBonus = switch,"false","true",tag=B站每日等级任务,desc=每天自动完成哔哩哔哩等级任务
MXBC_DailyBonus = switch,"false","true",tag=蜜雪冰城每日签到,desc=每天自动完成蜜雪冰城签到任务
SoulSing_DailyBonus = switch,"false","true",tag=Soul金币签到,desc=每天自动完成Soul签到任务
WechatPay_DailyBonus = switch,"false","true",tag=支付有优惠金币获取,desc=定时自动领取金币
BiliBili_CRONEXP = input,"0 8 * * *",tag=B站定时参数,desc=这里需要输入符合CRON表达式的参数
MXBC_CRONEXP = input,"0 9 * * *",tag=蜜雪冰城定时参数,desc=这里需要输入符合CRON表达式的参数
Soul_CRONEXP = input,"50 9 * * *",tag=Soul定时参数,desc=这里需要输入符合CRON表达式的参数
WechatPay_CRONEXP = input,"0 10 * * *",tag=支付有优惠定时参数,desc=这里需要输入符合CRON表达式的参数

[Script]
# B站
http-request ^https?:\/\/cm\.bilibili\.com\/cm\/api\/fees\/wise$ script-path=https://raw.githubusercontent.com/ClydeTime/BiliBili/main/js/BiliBiliDailyBonus.js, tag=B站Cookie(APP),enable={BiliBili_Cookie_APP}
http-request ^https?:\/\/m.bilibili.com/$ script-path=https://raw.githubusercontent.com/ClydeTime/BiliBili/main/js/BiliBiliDailyBonus.js, tag=B站Cookie(网页),enable={BiliBili_Cookie_WEB}
cron {BiliBili_CRONEXP} script-path=https://raw.githubusercontent.com/ClydeTime/BiliBili/main/js/BiliBiliDailyBonus.js, tag=B站每日等级任务,enable={BiliBili_DailyBonus}

# 蜜雪冰城
http-response ^https:\/\/mxsa\.mxbc\.net\/api\/v1\/customer\/info script-path=https://raw.githubusercontent.com/mist-whisper/Script/master/MXBC/mxbc.js, requires-body=true, timeout=60,  tag=蜜雪冰城Cookie,enable={MXBC_Cookie}
cron {MXBC_CRONEXP} script-path=https://raw.githubusercontent.com/mist-whisper/Script/master/MXBC/mxbc.js,  tag=蜜雪冰城每日签到,enable={MXBC_DailyBonus}

# Soul
http-request ^https:\/\/increase-openapi\.soulapp\.cn\/increase\/sign\/userSign script-path=https://raw.githubusercontent.com/ZenmoFeiShi/Qx/refs/heads/main/SoulSing.js, timeout=60, tag=SoulCookie,enable={Soul_Cookie}
cron {Soul_CRONEXP} script-path=https://raw.githubusercontent.com/ZenmoFeiShi/Qx/refs/heads/main/SoulSing.js, timeout=120, tag=Soul金币签到,enable={SoulSing_DailyBonus}

# 微信支付有优惠
http-response https:\/\/payapp\.weixin\.qq\.com\/(coupon-center-user\/home\/login|coupon-center-award\/award\/detail) tag=支付有优惠Cookie,script-path=https://raw.githubusercontent.com/FoKit/Scripts/main/scripts/wechat_pay_coupon.js,requires-body=1,enable={WechatPay_Cookie}
cron {WechatPay_CRONEXP} script-path=https://raw.githubusercontent.com/FoKit/Scripts/main/scripts/wechat_pay_coupon.js,tag=支付有优惠金币获取,enable={WechatPay_DailyBonus}

[MITM]
hostname = cm.bilibili.com, m.bilibili.com, mxsa.mxbc.net, payapp.weixin.qq.com, increase-openapi.soulapp.cn
